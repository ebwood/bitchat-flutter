<p align="center">
    <img src="https://github.com/user-attachments/assets/188c42f8-d249-4a72-b27a-e2b4f10a00a8" alt="Bitchat Logo" width="480">
</p>

<p align="center">
    <b>ğŸ”— <a href="https://github.com/permissionlesstech/bitchat">permissionlesstech/bitchat</a> çš„ Flutter å®ç°</b><br>
    <i>ä¸€å¥—ä»£ç ã€‚iOSã€Androidã€macOSã€‚åŠŸèƒ½å®Œå…¨å¯¹é½ã€‚</i>
</p>

> [!WARNING]
> æœ¬è½¯ä»¶å°šæœªæ¥å—å¤–éƒ¨å®‰å…¨å®¡è®¡ï¼Œå¯èƒ½å­˜åœ¨å®‰å…¨æ¼æ´ã€‚åœ¨ç»è¿‡å®¡è®¡ä¹‹å‰ï¼Œè¯·å‹¿ç”¨äºæ•æ„Ÿåœºæ™¯ã€‚å¼€å‘è¿›è¡Œä¸­ã€‚

# bitchat for Flutter

å®‰å…¨ã€å»ä¸­å¿ƒåŒ–çš„ç‚¹å¯¹ç‚¹é€šè®¯åº”ç”¨ï¼Œé€šè¿‡è“ç‰™ Mesh ç½‘ç»œå’Œ Nostr ä¸­ç»§è¿è¡Œã€‚æ— éœ€æœåŠ¡å™¨ï¼Œæ— éœ€æ‰‹æœºå· â€”â€” çº¯ç²¹çš„ç«¯åˆ°ç«¯åŠ å¯†é€šä¿¡ï¼Œä¸€å¥—ä»£ç è¦†ç›– **iOSã€Android å’Œ macOS**ã€‚

è¿™æ˜¯åŸç‰ˆ [bitchat](https://github.com/permissionlesstech/bitchat) é¡¹ç›®çš„ **Flutterï¼ˆè·¨å¹³å°ï¼‰å®ç°**ï¼Œå°† [iOS](https://github.com/nickshouse/bitchat) å’Œ [Android](https://github.com/nickshouse/bitchat-android) åŸç”Ÿåº”ç”¨çš„åŠŸèƒ½åˆå¹¶ä¸ºä¸€ä¸ªç»Ÿä¸€çš„åº”ç”¨ç¨‹åºã€‚

## åŠŸèƒ½ç‰¹æ€§

- **âœ… è·¨å¹³å°**: å•ä¸€ä»£ç åº“è¦†ç›– iOSã€Android å’Œ macOS
- **âœ… Nostr ä¸­ç»§é€šä¿¡**: é€šè¿‡å…¬å…± Nostr ä¸­ç»§è¿›è¡Œå®æ—¶é€šä¿¡ï¼ˆæ— éœ€æ¥è¿‘ï¼‰
- **âœ… BLE Mesh ç½‘ç»œ**: è“ç‰™ä½åŠŸè€—çš„èŠ‚ç‚¹å‘ç°å’Œå¤šè·³æ¶ˆæ¯ä¸­ç»§
- **âœ… ç«¯åˆ°ç«¯åŠ å¯†**: Noise åè®® (`XX_25519_ChaChaPoly_SHA256`) åŠ å¯†é€šé“
- **âœ… é¢‘é“èŠå¤©**: åŸºäºä¸»é¢˜çš„ç¾¤ç»„èŠå¤©ï¼Œæ”¯æŒé¢‘é“æ ‡ç­¾
- **âœ… IRC é£æ ¼å‘½ä»¤**: `/join`ã€`/nick`ã€`/msg`ã€`/who`ã€`/clear` ç­‰
- **âœ… ç´§æ€¥æ¸…é™¤**: ä¸‰å‡»è§¦å‘ï¼Œç«‹å³æ¸…é™¤æ‰€æœ‰æ•°æ®
- **âœ… è‡ªé€‚åº”ç”µæ± ç®¡ç†**: 4 ç§ç”µæºæ¨¡å¼ï¼ˆæ€§èƒ½ / å‡è¡¡ / çœç”µ / è¶…çœç”µï¼‰
- **âœ… æ¶ˆæ¯å‹ç¼©**: Zlib å‹ç¼©ï¼Œè‡ªåŠ¨é™çº§å›é€€
- **âœ… æ©æŠ¤æµé‡**: å¯†ç å­¦éšæœºè™šæ‹ŸåŒ…ï¼Œé˜²æ­¢æµé‡åˆ†æ
- **âœ… åè®®å…¼å®¹**: äºŒè¿›åˆ¶æ ¼å¼ä¸ iOS/Android å®Œå…¨ä¸€è‡´

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- **Flutter**: 3.0+ï¼ŒDart 3.0+
- **Xcode**: 15+ï¼ˆiOS/macOS æ„å»ºï¼‰
- **Android Studio**: Arctic Fox+ï¼ˆAndroid æ„å»ºï¼‰

### æ„å»ºä¸è¿è¡Œ

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/nicklauszhangdev/bitchat-flutter.git
cd bitchat-flutter

# å®‰è£…ä¾èµ–
flutter pub get

# åœ¨è¿æ¥çš„è®¾å¤‡ä¸Šè¿è¡Œ
flutter run

# è¿è¡Œæµ‹è¯•
flutter test
```

### å¹³å°é…ç½®

**iOS/macOS**: åœ¨ Xcode ä¸­æ‰“å¼€ `ios/Runner.xcworkspace` é…ç½®ç­¾åå’ŒåŠŸèƒ½ï¼ˆè“ç‰™ LEã€ç½‘ç»œï¼‰ã€‚

**Android**: ç¡®ä¿ `android/app/build.gradle` ä¸­ `minSdkVersion 21`ã€‚è“ç‰™å’Œä½ç½®æƒé™å·²åœ¨ `AndroidManifest.xml` ä¸­é…ç½®ã€‚

## æ¶æ„

```
lib/
â”œâ”€â”€ ble/                  # è“ç‰™ LE Mesh ç½‘ç»œ
â”‚   â”œâ”€â”€ ble_mesh_service.dart    # BLE æ‰«æã€è¿æ¥ç®¡ç†ã€Mesh ä¸­ç»§
â”‚   â””â”€â”€ ble_types.dart           # æ•°æ®åŒ…ç±»å‹ã€èŠ‚ç‚¹æ¨¡å‹
â”œâ”€â”€ nostr/                # Nostr åè®®å®ç°
â”‚   â”œâ”€â”€ nostr_event.dart         # NIP-01 äº‹ä»¶æ¨¡å‹
â”‚   â”œâ”€â”€ nostr_relay_manager.dart # WebSocket ä¸­ç»§è¿æ¥
â”‚   â””â”€â”€ nostr_filter.dart        # è®¢é˜…è¿‡æ»¤å™¨
â”œâ”€â”€ services/             # åº”ç”¨æœåŠ¡
â”‚   â””â”€â”€ nostr_chat_service.dart  # é€šè¿‡ Nostr ä¸­ç»§èŠå¤©
â”œâ”€â”€ protocol/             # äºŒè¿›åˆ¶åè®®ä¸åŠ å¯†
â”‚   â”œâ”€â”€ binary_codec.dart        # æ•°æ®åŒ…ç¼–è§£ç 
â”‚   â”œâ”€â”€ noise_handshake.dart     # Noise XX æ¡æ‰‹
â”‚   â””â”€â”€ identity_key_manager.dart
â”œâ”€â”€ ui/                   # ç”¨æˆ·ç•Œé¢
â”‚   â”œâ”€â”€ home_screen.dart         # ä¸»å±å¹•ï¼ˆæ ‡ç­¾é¡µï¼‰
â”‚   â”œâ”€â”€ chat_screen.dart         # èŠå¤©æ¶ˆæ¯è§†å›¾
â”‚   â””â”€â”€ settings_screen.dart     # åº”ç”¨è®¾ç½®
â””â”€â”€ main.dart
```

## é€šä¿¡é€šé“

| é€šé“ | åè®® | èŒƒå›´ | éœ€è¦äº’è”ç½‘ |
|------|------|------|-----------|
| **BLE Mesh** | è“ç‰™ä½åŠŸè€— | æ¯è·³çº¦ 30mï¼Œå¤šè·³ä¸­ç»§ | âŒ å¦ |
| **Nostr ä¸­ç»§** | WebSocket (NIP-01) | å…¨çƒ | âœ… æ˜¯ |

æ¶ˆæ¯é€šè¿‡ä»»ä½•å¯ç”¨çš„é€šé“è·¯ç”±ã€‚BLE Mesh å®ç°ç¦»çº¿ã€è¿‘è·ç¦»èŠå¤©ï¼›Nostr ä¸­ç»§æ‰©å±•è‡³äº’è”ç½‘å…¨çƒè¦†ç›–ã€‚

## å‘½ä»¤

| å‘½ä»¤ | æè¿° |
|------|------|
| `/join #é¢‘é“` | åŠ å…¥æˆ–åˆ›å»ºé¢‘é“ |
| `/nick æ˜µç§°` | è®¾ç½®æ˜µç§° |
| `/msg @ç”¨æˆ· æ¶ˆæ¯` | å‘é€ç§ä¿¡ |
| `/who` | åˆ—å‡ºåœ¨çº¿ç”¨æˆ· |
| `/clear` | æ¸…ç©ºèŠå¤©æ¶ˆæ¯ |
| `/channels` | æ˜¾ç¤ºå·²å‘ç°çš„é¢‘é“ |
| `/help` | æ˜¾ç¤ºæ‰€æœ‰å‘½ä»¤ |

## å®‰å…¨ä¸éšç§

- **æ— éœ€æ³¨å†Œ**: æ— éœ€è´¦å·ã€é‚®ç®±æˆ–æ‰‹æœºå·
- **Noise åè®®**: `Noise_XX_25519_ChaChaPoly_SHA256` åŠ å¯†é€šé“
- **Nostr å¯†é’¥**: secp256k1 å¯†é’¥å¯¹ç”¨äºèº«ä»½å’Œæ¶ˆæ¯ç­¾å
- **é»˜è®¤ä¸´æ—¶**: æ¶ˆæ¯ä»…å­˜åœ¨äºè®¾å¤‡å†…å­˜ä¸­
- **æ©æŠ¤æµé‡**: éšæœºè™šæ‹ŸåŒ…é˜²æ­¢æµé‡åˆ†æ
- **ç´§æ€¥æ¸…é™¤**: ä¸‰å‡»ç«‹å³æ¸…é™¤æ‰€æœ‰æ•°æ®

## åè®®å…¼å®¹æ€§

æ‰€æœ‰äºŒè¿›åˆ¶æ ¼å¼ä¸åŸç‰ˆ iOS/Android å®ç°å®Œå…¨ä¸€è‡´ï¼š

- æ•°æ®åŒ…å¤´ï¼š14 å­—èŠ‚ (v1) / 16 å­—èŠ‚ (v2)
- å­—èŠ‚åºï¼šå…¨ç¨‹å¤§ç«¯åº
- å¡«å……ï¼šPKCS#7 å¯¹é½åˆ° 256/512/1024/2048
- BLE UUIDï¼šç›¸åŒçš„æœåŠ¡å’Œç‰¹å¾ ID
- Noiseï¼š`Noise_XX_25519_ChaChaPoly_SHA256`
- Nostrï¼šæ ‡å‡† NIP äº‹ä»¶æ ¼å¼

## ç›¸å…³é¡¹ç›®

- **iOS**: [bitchatï¼ˆåŸç‰ˆï¼‰](https://github.com/jackjackbits/bitchat) â€” Swift + SwiftUI
- **Android**: [bitchat-android](https://github.com/permissionlesstech/bitchat-android) â€” Kotlin + Jetpack Compose

## è®¸å¯è¯

æœ¬é¡¹ç›®å‘å¸ƒä¸ºå…¬å…±é¢†åŸŸã€‚è¯¦è§ [LICENSE](LICENSE.md) æ–‡ä»¶ã€‚
